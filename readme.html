<meta charset="UTF-8">

<!-- The speech -->
<script src="speech.js"></script>

<script type="text/javascript">

	// Extract all the words
	const words = fulltext.toLowerCase().split(/[ !"\#$%&'()*+,\-./:;<=>?@\[\\\]^_`{|}~]+/)

	const sentences = fulltext.toLowerCase().split(/[!-.;?] /)
	console.log("Sentences " + sentences.length)

	// Create associative array and count word frequency
	var unique = []

	// Check if entry exists, create if not, increment if so
	for (var i in words) {

		const w = words[i]

		var found = -1

		for (var j in unique) {

			if (unique[j].word == w) {

				found = j
				break
			}
		}

		if (found === -1) {
			unique.push({ word: w, count: 1 })
		}
		else {
			++unique[j].count
		}
	}

	unique.sort(function(a, b) { return b.count - a.count })

	console.log("Total words " + words.length)
	console.log("Unique words " + unique.length)

	// Print the most common
	for (var i = 0; i < 30 && i < unique.length; ++i)
		console.log(unique[i].count + "\t" + unique[i].word)

	// Periodically reload the page
	setInterval(function() {

		if (window.location.href.split("?").pop() === "reload")
			window.location.reload()
	}, 1000)

</script>
